- defaults:
    link:
      relink: true

- clean: ['~']

- shell:
  - [git submodule update --init --recursive, Installing submodules]
  -
    command: if [[ $SHELL != "/bin/zsh" ]]; then sudo chsh -s /bin/zsh `whoami`; fi
    stdin: true
    stdout: true
  -
    command: if [[ $OSTYPE == darwin* ]] && ! which brew &>/dev/null; then /usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"; fi
    stdout: true
  -
    command: if [ ! -d ~/.git_template ]; then mkdir ~/.git_template; fi

- brewfile:
    - homebrew/Brewfile

- shell:
  -
    command: asdf plugin-add ruby https://github.com/asdf-vm/asdf-ruby.git
    stdout: true
  -
    command: asdf plugin-add erlang https://github.com/asdf-vm/asdf-erlang.git
    stdout: true
  -
    command: asdf plugin-add elixir https://github.com/asdf-vm/asdf-elixir.git
    stdout: true
  -
    command: ASDF_RUBY_BUILD_VERSION=master asdf install ruby 2.4.3
    stdout: true
  -
    command: asdf install elixir 1.6
    stdout: true
  -
    command: asdf install erlang 20.3
    stdout: true
  -
    command: gem install colorls
    stdout: true

- link:
    ~/.bash: bash/bash
    ~/.bashrc: bash/bashrc
    ~/.fzf.zsh:
      path: zsh/fzf.zsh
      force: true
    ~/.gitignore: git/gitignore
    ~/.gitconfig: git/gitconfig
    ~/.iterm2: mac/iterm2
    ~/.spacemacs: emacs/spacemacs
    ~/.tmate.conf: cmm/tmate.conf
    ~/.vimrc: vim/vimrc
    ~/.zsh: zsh
    ~/.zshrc:
      path: zsh/zshrc
      force: true
    ~/.p10k.zsh:
      path: zsh/p10k.zsh
      force: true
    /usr/local/bin/git-each: git/util/git-each
    /usr/local/bin/git-eachsh: git/util/git-eachsh
    /usr/local/bin/git-find-all: git/util/git-find-all
